<!DOCTYPE html>
<html>
    <head>
        <title>延伸期预报-产品展示</title>
        <link rel="stylesheet" href="css/zui.min.css"/>
        <link rel="stylesheet" href="css/bootstrap.min.css" rel="stylesheet">
        <link rel="stylesheet" href="css/common.css"/>
        <link rel="stylesheet" href="css/display.css"/>
        <link rel="stylesheet" href="css/datetimepicker.min.css"/>
        <link rel="stylesheet" href="css/buttons.css">
        <link rel="stylesheet" href="css/font-awesome.min.css">
        <script type="text/javascript" src="js/jquery.min.js"></script>
        <script type="text/javascript" src="js/buttons.js"></script>
        <script type="text/javascript" src='libs/WeatherMap.Include.js'></script>
        <script type="text/javascript" src="js/jquery.cookie.js"></script>
        <script type="text/javascript" src="js/zui.min.js"></script>
        <script type="text/javascript" src="js/bootstrap-modal.js"></script>
        <script type="text/javascript" src="js/styles/plotStyles_surface.js"></script>
        <script type="text/javascript" src="js/styles/plotStyles_hight.js"></script>
        <script type="text/javascript" src="js/styles/rain1hStyles.js"></script>
        <script type="text/javascript" src="js/styles/rain3hStyles.js"></script>
        <script type="text/javascript" src="js/styles/rain6hStyles.js"></script>
        <script type="text/javascript" src="js/styles/rain12hStyles.js"></script>
        <script type="text/javascript" src="js/styles/rain24hStyles.js"></script>
        <script type="text/javascript" src="js/styles/windStyles.js"></script>
        <script type="text/javascript" src="js/styles/tempStyles.js"></script>
        <script type="text/javascript" src="js/styles/rhStyles.js"></script>
        <script type="text/javascript" src="js/styles/heatMap_TempStyles.js"></script>
        <script type="text/javascript" src="js/styles/heatMap_TempJuPingStyles.js"></script>
        <script type="text/javascript" src="js/styles/heatMap_RHStyles.js"></script>
        <script type="text/javascript" src="js/styles/heatMap_Rain24Styles.js"></script>
        <script type="text/javascript" src="js/styles/heatMap_Rain24JuPingStyles.js"></script>
        <script type="text/javascript" src="js/CommonFunction.js"></script>
        <script type="text/javascript" src="js/Renderer/Plot.js"></script>
        <script type="text/javascript" src="js/Renderer/StreamLine.js"></script>
        <script type="text/javascript" src="js/Renderer/NeonLine.js"></script>
        <script type="text/javascript" src="js/Renderer/Contour.js"></script>
        <script type="text/javascript" src="js/Controls/datetimepicker.min.js"></script>
        <script type="text/javascript" src="js/Controls/ChartClass.js"></script>
        <script type="text/javascript" src="js/Controls/highcharts.js"></script>
        <script type="text/javascript" src="js/Controls/exporting.js"></script>
        <script type="text/javascript" src="js/Controls/DateSelecter.js"></script>
        <script type="text/javascript" src="js/Controls/YuBaoshixiaoTools.js"></script>
        <script type="text/javascript" src="js/Controls/SideWrapper.js"></script>
        <script type="text/javascript" src="js/Controls/MapSwitch.js"></script>
        <script type="text/javascript" src="js/Controls/Legend.js"></script>
        <script type="text/javascript" src="js/Controls/MapTool.js"></script>
        <script type="text/javascript" src="js/CorrectAction.js"></script>
        <script type="text/javascript" src="js/MagicTool.js"></script>
        <script type="text/javascript" src="js/FilterTool.js"></script>
        <script type="text/javascript" src="js/CrossRelation.js"></script>
        <script type="text/javascript" src="js/CrossCorrection.js"></script>
        <script type="text/javascript" src="js/Pages/PageBase.js"></script>
        <script type="text/javascript" src="js/Pages/SZMSPageClass.js"></script>
        <script type="text/javascript" src="js/Pages/GDYBPageClass.js"></script>
        <script type="text/javascript" src="js/Pages/ZDYBPageClass.js"></script>
        <script type="text/javascript" src="js/Pages/XTGLPageClass.js" ></script>
        <script type="text/javascript" src="js/Pages/YBCPPageClass.js" ></script>
        <script type="text/javascript" src="js/Pages/QYCPPageClass.js" ></script>
        <script type="text/javascript" src="js/Pages/ZDYBSZPageClass.js" ></script>
        <script type="text/javascript" src="js/Pages/ZDGLPageClass.js" ></script>
        <script type="text/javascript" src="js/Pages/DisplayPageClass.js" ></script>
        <script type="text/javascript" src="js/Pages/YBCPSKPageClass.js" ></script>
        <script type="text/javascript" src="js/Pages/LSWPageClass.js" ></script>
        <script type="text/javascript" src="js/Pages/MJOPageClass.js" ></script>
        <script type="text/javascript" src="js/GridProductClass.js"></script>
        <script type="text/javascript" src="js/DataClass/RadarDataClass.js"></script>
        <script type="text/javascript" src="js/DataClass/AWXDataClass.js"></script>
        <script type="text/javascript" src="js/DataClass/MicapsDataClass.js"></script>
        <script type="text/javascript" src="js/DataClass/TextDataClass.js"></script>
        <script type="text/javascript" src="js/main.js"></script>
		<script type="text/javascript" src="js/Layers/LocalTiledCacheLayer.js"></script>
        <script type="text/javascript" src="js/Layers/LocalTiledCacheLayerBlackMap.js"></script>
        <script type="text/javascript" src="js/Layers/LocalTiledCacheLayerWhiteMap.js"></script>
        <script type="text/javascript" src="js/Layers/LocalTiledCacheLayerTDTIMG.js"></script>
        <script type="text/javascript" src="js/Layers/LocalTiledCacheLayerTDTMAP.js"></script>
        <script type="text/javascript" src="js/Layers/LocalTiledCacheLayerTDTTER.js"></script>
        <script type="text/javascript" src="js/Layers/TianDiTuLayer.js"></script>
        <script type="text/javascript" src="js/FeatureUtilityClass.js"></script>
        <script type="text/javascript" src="js/Layers/FillColorLayer.js"></script>
        <script type="text/javascript" src="js/Layers/FillRangeColorLayer.js"></script>
        <script type="text/javascript" src="js/Layers/MappingLayer.js"></script>
        <script type="text/javascript" src="js/DataCache.js"></script>
        <script type="text/javascript" src="js/DataStack.js"></script>
        <script type="text/javascript" src="js/GridAnalyst.js"></script>
        <script type="text/javascript" src="js/Rect.js"></script>
        <script type="text/javascript" src="js/Panels/DragPanelBase.js"></script>
        <script src="data/StreamLine.js"></script>
        <script src="data/StreamLine_uv.js"></script>
        <script src="data/winddata.js"></script>
        <script type="text/javascript" src="js/config/config.js"></script>
        <script type="text/javascript" src="js/GridUtil.js"></script>
        <!-- mmgrid-->
        <link rel="stylesheet" href="css/mmgrid/mmGrid-bootstrap.css" />
        <link rel="stylesheet" href="css/mmgrid/mmGrid.css" />
        <link rel="stylesheet" href="css/mmgrid/mmPaginator.css" />
        <script type="text/javascript" src="js/mmGrid.js" ></script>
        <!-- mmgrid end -->
        <!-- artdialog -->
        <link rel="stylesheet" href="css/artdialog/ui-dialog.css" />
        <script type="text/javascript" src="css/artdialog/dialog-min.js" ></script>
        <!-- artdialog end-->
        <script type="text/javascript" src="js/jquery.form.js" ></script>
        <script type="text/javascript" src="js/latticeForcast.js"></script>
        <!-- page start-->
        
        <!-- page end-->
    </head>
    <body>
        <div class="body">
            <div class="banner">
                <div class="background">
                </div>
                <div class="logo">
                    <img src="imgs/img_banner_titlie_display.png" height="100%">
                </div>
                <div class="logo">
                    <img src="imgs/img_banner_background.png" height="100%">
                </div>
            </div>
            <div id="content_div" class="content" style="width: 100%;margin-left: auto;margin-right: auto">
                <div id="workspace_div">
                    <div id="top_div">
                    <div id="mapContainer_div" style="left: 0px;position: relative;float: left;height: 100%">
                        <div id="mapTool_div" class="mapTool" style="border-left: 1px solid #DFDFDF;border-right: 1px solid #DFDFDF;">
                            <div id="divTool" style="height: 30px">
                                <div id='dateSelect' style='margin-left: 0px;float:left'></div>
                                <select id='selectElement' style='float:left;background-color:rgba(225, 225, 235, 0);width:120px;height:26px;margin:0px 0px 0px 5px;font-size: 13px;font-weight: bold'><option value='r24'>降水量</option><option value='2t'>气温</option><option value='10to302tjp'>10-30天气温距平</option><option value='10to30r24jp'>10-30天降水距平率</option></select>
                                <select id='selectTimes' style='float:left;background-color:rgba(225, 225, 235, 0);width:120px;height:26px;margin:0px 0px 0px 5px;font-size: 13px;font-weight: bold'><option value='day'>天</option><option value='hou'>侯</option><option value='xun'>旬</option></select>
                            </div>
                            <div id="divHourSpan">
                            </div>
                        </div>
                        <div id="map_div" class="map_normal" style="position: relative;left: 0px">
                            <div id="map_title_div" style="position: absolute;display: none;left:50%;top:0%;width: 140px;margin-left:-140px;text-align:center;background-color:rgba(255,255,255,0.8);border:1px solid rgb(52,115,183);font-size:16px;z-index: 5;"></div>
                            <div id="map_alert_div" style="position: absolute;display: none;left:50%;top:50%;width: 300px;margin-left:-140px;text-align:center;font-size:24px;color:rgb(255,0,0);z-index: 5;">无数据</div>
                            <div id="div_progress" style="opacity:0.9;position: absolute;top: 50%;left: 50%;margin: -120px 0px 0px -120px;z-index: 99;display: none;text-align: center;">
                                <link rel="stylesheet" href="css/load6.css">
                                <div class="load-container load6">
                                    <span id="div_progress_title" style="color: #ffff00;font-size: 16px;font-weight: bold;text-shadow:rgb(0,0,0) 1px 0 0,rgb(0,0,0) 0 1px 0,rgb(0,0,0) -1px 0 0,rgb(0,0,0) 0 -1px 0;">正在生成格点报...</span>
                                    <div class="loader">Loading...::after</div>
                                </div>
                            </div>
                            <div id="div_legend" style="position: absolute;display: block;bottom: 0px;width: 100%; height: 30px;z-index: 5;text-align: center;">
                                <div style="height: 20px;display: inline-block;">
                                    <div id="div_legend_items" style="height: 30px;"></div>
                                </div>
                            </div>
                            <div id="mapSwitch_div" class="mapLayer" style="z-index:20;">
                                <div style="float:right;">
                                    <div>
                                        <img id="curImg" class="mapNowImg" flag="vec" src="imgs/img_map_loc_day.png">
                                    </div>
                                </div>
                                <div id="div_tdt_ter" onclick="tiandituOnclick(this)" class="moreMapLayer" style="float: right; margin-right: 5px; display: none;">
                                    <div>
                                        <div>
                                            <img class="mapImg" flag="ter" src="imgs/img_map_tdt_ter.png">
                                        </div>
                                    </div>
                                </div>
                                <div id="div_tdt_map" onclick="tiandituOnclick(this)" class="moreMapLayer" style="float: right; margin-right: 5px; display: none;">
                                    <div>
                                        <div>
                                            <img class="mapImg" flag="vec" src="imgs/img_map_tdt_map.png">
                                        </div>
                                    </div>
                                </div>
                                <div id="div_tdt_img_local" onclick="tiandituOnclick(this)" class="moreMapLayer" style="float: right; margin-right: 5px; display: none;">
                                    <div>
                                        <div>
                                            <img class="mapImg" flag="img_local" src="imgs/img_map_tdt_img_local.png">
                                        </div>
                                    </div>
                                </div>
                                <div id="div_tdt_ter_local" onclick="tiandituOnclick(this)" class="moreMapLayer" style="float: right; margin-right: 5px; display: none;">
                                    <div>
                                        <div>
                                            <img class="mapImg" flag="ter_local" src="imgs/img_map_tdt_ter_local.png">
                                        </div>
                                    </div>
                                </div>
                                <div id="div_tdt_map_local" onclick="tiandituOnclick(this)" class="moreMapLayer" style="float: right; margin-right: 5px; display: none;">
                                    <div>
                                        <div>
                                            <img class="mapImg" flag="vec_local" src="imgs/img_map_tdt_map_local.png">
                                        </div>
                                    </div>
                                </div>
                                <div id="div_loc_night" onclick="tiandituOnclick(this)" class="moreMapLayer" style="float: right; margin-right: 5px; display: none;">
                                    <div>
                                        <div>
                                            <img class="mapImg" flag="night" src="imgs/img_map_loc_night.png">
                                        </div>
                                    </div>
                                </div>
                                <div id="div_loc_day" onclick="tiandituOnclick(this)" class="moreMapLayer" style="float: right; margin-right: 5px; display: none;">
                                    <div>
                                        <div>
                                            <img class="mapImg" flag="day" src="imgs/img_map_loc_day.png">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div id="map" style="position: relative;border: 1px solid rgb(175,205,225);"></div>
                            <div id="chart_div" style="position:absolute;z-index:10;bottom:10px;left:10px;background:#fff;border:1px solid #b6bfc6;pading:5px;"></div>
                            <div id="div_showGridValue" style="display:none; position: absolute; border: 1px solid #4c4c4c;background-color:rgba(255,255,255,0.5);padding:3px 3px 3px 3px;"></div>
                        </div>
                    </div>
                    <div id="latticeForcast" class="latticeForcast"></div>
                    </div>
                    <div id="bottom_div" style="margin-top: 10px">
                    <div id="latticePrecipitation" class="latticePrecipitation"></div>
                    </div>
                </div>
            </div>
        </div>
    </body>
    <script type="text/javascript">
        var nTickCount = 0;

        //鼠标滑过地图切换DIV
        $(".mapLayer").hover(function(){
            var $this = $(this).find(".moreMapLayer");
            $this.css("display","block");
        },function(){
            var $this = $(this).find(".moreMapLayer");
            $this.css("display","none");
        });

        $(document).ready(function(){
            //window.GDYB&&GDYB.Page.main();
            GDYB.DisplayPage = new DisplayPageClass();
            GDYB.Page.curPage = GDYB.DisplayPage;
            GDYB.DisplayPage.active();
        });

        //键盘按键事件
        $(document).keydown(function (event) {
            if(event.keyCode == 189 || event.keyCode == 83) //-、s
                GDYB.GridProductClass.updateGrid(GDYB.GridProductClass.subValue, 1);
            else if(event.keyCode == 187 || event.keyCode == 65) //+、a
                GDYB.GridProductClass.updateGrid(GDYB.GridProductClass.addValue, 1);
        });

        //弹出输入框
        function popup_submit_fun(){
            var t = this;
            var value = $("#popup_text").val();
            if(value&&value!=""){
                $("#popup_div").css("display","none");
                GDYB.GridProductClass.currentGridValuePicked = Math.floor(value*10)/10;
            }
            else{
                alert("请输入格点值");
            }
        }

        function popup_cancel_fun(){
            $("#popup_div").css("display","none");
            GDYB.GridProductClass.currentGridValuePicked = null;
        }

        //右键菜单事件处理
        var hourspanCopy = null;
        var hourspanHover = null;
        $("#divContextMenu").find("div").click(function(){
            if(this.id == "div_copy"){
                hourspanCopy = hourspanHover;
                $("#div_paste").css("display", "block");
                $("#divContextMenu").css("display", "none");
            }
            else if(this.id == "div_paste"){
                $("#divContextMenu").css("display", "none");
                //var template = "是否将{0}小时格点粘贴到{1}小时格点？";
                //if(confirm(template.format(hourspanCopy, hourspanHover)) == true)
                {
                    var hourspanData = GDYB.GridProductClass.dataCache.getData(GDYB.GridProductClass.currentMakeTime, GDYB.GridProductClass.currentVersion,
                            GDYB.GridProductClass.currentDateTime, GDYB.GridProductClass.currentElement, hourspanCopy);

                    //这里必须拷贝
                    var dataStack = new DataStack();
                    var datasetGrid = dataStack.clone(hourspanData.data);

                    GDYB.GridProductClass.dataCache.addData(GDYB.GridProductClass.currentMakeTime, GDYB.GridProductClass.currentVersion,
                            GDYB.GridProductClass.currentDateTime, GDYB.GridProductClass.currentElement, hourspanHover, datasetGrid, 1);
                    GDYB.GDYBPage.updateHourSpanStatus();
                }
            }
            else if(this.id == "div_cancel"){
                $("#divContextMenu").css("display", "none");
            }
        });

        $("#a_exit").click(function(){
            if(this.innerHTML == "退出") {
                GDYB.GridProductClass.currentUserName = null;

                $("#span_user")[0].innerHTML = "未登录";
                $.cookie('password', '', { expires: -1 });      //如果退出，不记录密码
                $.cookie("rmbUser", 'false', { expire: -1 });   //如果退出，不记录密码
                this.innerHTML = "登录";
            }
            else if(this.innerHTML == "登录") {
                window.location.href="index.html";
            }
        });

        $("#menu_bd").hover(function(){
            $("#displayBtn").css("display", "block");
        });
        $("#menu_bd").mouseleave(function(){
            setTimeout("$('#displayBtn').css('display', 'none')",5000);
        });
    </script>
</html>